<!-- chat/templates/chat/index.html -->
{% extends 'base.html' %}
{% block content %}
{%if request.user.is_authenticated%}
<div class="container">
    <div class="card" style="padding: 12px;">
    <h3 class="card-title">What chat room would you like to enter?</h3>
    <p>Chat rooms are Web sites or programs that allow people to send text messages to one another in real time. The chat room works as a virtual room, where groups of people send messages that others can read instantaneously. </p>
    <br>
    
    <input id="room-name-input" type="text" size="20">
<div class="card-body">
    <input id="room-name-submit" class="btn btn-primary" size="20" type="button" value="Enter">

    <script>
        document.querySelector('#room-name-input').focus();
        document.querySelector('#room-name-input').onkeyup = function(e) {
            if (e.keyCode === 13) {  // enter, return
                document.querySelector('#room-name-submit').click();
            }
        };

        document.querySelector('#room-name-submit').onclick = function(e) {
            var roomName = document.querySelector('#room-name-input').value;
            window.location.pathname = '/chat/' + roomName + '/';
        };
    </script>
    </div>
    </div>
</div>
{%else%}
     <div class="d-flex flex-column">
        <div class="card">
        <p class="m-auto">You must authenticate to view this page. </p>
        <p class="m-auto">
            <a href="{% url 'register' %}">Create an account</a> or 
            <a href="{% url 'login' %}">login</a>.
        </p>
        </div>
    </div>
{%endif%}
{% endblock content %}
